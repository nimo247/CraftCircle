{"version":3,"file":"auth-CRzt4S5B.js","sources":["../../server/routes/auth.ts"],"sourcesContent":["import express from \"express\";\nimport admin from \"../firebaseAdmin\";\n\nconst router = express.Router();\n\nrouter.post(\"/verify\", async (req, res) => {\n  const { idToken } = req.body;\n  if (!idToken) {\n    return res.status(400).json({ message: \"idToken is required\" });\n  }\n\n  try {\n    const decoded = await admin.auth().verifyIdToken(idToken);\n    const user = await admin.auth().getUser(decoded.uid);\n    return res.json({ decoded, user });\n  } catch (err) {\n    console.error(\"Error verifying id token:\", err);\n    return res.status(401).json({ message: \"Invalid or expired token\" });\n  }\n});\n\nexport default router;\n"],"names":["express"],"mappings":";;;AAGA,MAAM,SAASA,iBAAQ,OAAA;AAEvB,OAAO,KAAK,WAAW,OAAO,KAAK,QAAQ;AACzC,QAAM,EAAE,YAAY,IAAI;AACxB,MAAI,CAAC,SAAS;AACZ,WAAO,IAAI,OAAO,GAAG,EAAE,KAAK,EAAE,SAAS,uBAAuB;AAAA,EAChE;AAEA,MAAI;AACF,UAAM,UAAU,MAAM,MAAM,KAAA,EAAO,cAAc,OAAO;AACxD,UAAM,OAAO,MAAM,MAAM,OAAO,QAAQ,QAAQ,GAAG;AACnD,WAAO,IAAI,KAAK,EAAE,SAAS,MAAM;AAAA,EACnC,SAAS,KAAK;AACZ,YAAQ,MAAM,6BAA6B,GAAG;AAC9C,WAAO,IAAI,OAAO,GAAG,EAAE,KAAK,EAAE,SAAS,4BAA4B;AAAA,EACrE;AACF,CAAC;"}